# FoodPlan 

**FoodPlan** — Telegram-бот с Django-бэкендом и админкой, который помогает пользователю:
- подобрать рецепты по предпочтениям,
- сформировать список покупок,
- оформить подписку,
- получить рекомендации и сохранять понравившиеся блюда.

## Архитектура проекта

Проект построен по принципам **чистой архитектуры**:
- бизнес-логика отделена от инфраструктурных слоёв (бот, Django, БД);
- слои связаны через интерфейсы (`interfaces.py`, `dto.py`);
- логика Telegram-бота не зависит от фреймворков и может быть протестирована отдельно.

---

## Структура проекта

```text
foodplan/
├── bot/                # Telegram-бот: handlers, логика, кнопки, адаптеры
│   ├── handlers/       # Обработчики команд и состояний
│   ├── keyboards/      # Inline-кнопки и меню
│   ├── logic/          # Бизнес-логика (use-cases), независимая от Telegram
│   ├── adapters/       # Django-адаптеры: доступ к моделям и БД
│   ├── shared/         # Общие вспомогательные модули
│   ├── main.py         # Точка входа для запуска бота
├── users/              # Модели пользователей и профилей
├── recipes/            # Модели рецептов, категорий и ингредиентов
├── payments/           # Подписки, история оплат
├── foodplan/           # Django-конфигурация (settings, urls, wsgi)
├── tests/              # Покрытие бизнес-логики юнит-тестами
├── docs/               # Документация (архитектура, инструкции)
├── requirements.txt    # Зависимости проекта
├── docker-compose.yml  # Контейнеризация (опционально)
├── manage.py           # Django entry-point
└── seed.py             # Скрипт для генерации тестовых данных
```

---

## Что уже реализовано

- [x] Категории блюд и фильтрация рецептов
- [x] Возможность ставить лайки/дизлайки рецептам
- [x] Ограничение на 1 рецепт в день без подписки
- [x] Скрытие ингредиентов для пользователей без подписки
- [x] Рекомендации блюд по категориям
- [x] Подписка с автообновлением `paid_until`
- [x] Список покупок на основе выбранных рецептов
- [x] Русскоязычная админка
- [x] Полное покрытие бизнес-логики юнит-тестами (`pytest`)

---

## Запуск тестов

Для запуска всех тестов:

```bash
pytest -v tests/
```

Или можно запускать выборочно:

```bash
pytest tests/test_user_service_subscription.py
pytest tests/test_recipe_service.py
```

---

## Как развернуть локально

```bash
git clone https://github.com/your-team/foodplan.git
cd foodplan
python -m venv venv
source venv/bin/activate
pip install -r requirements.txt

python manage.py migrate
python manage.py createsuperuser
python manage.py runserver
```
